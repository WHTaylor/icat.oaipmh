<html>
<head>
<title>installation</title>
</head>
<body>

	<h1>Installation</h1>

	<h2>Compatibility</h2>
	This plugin will work with an ICAT version of 4.9.0 or greater.

	<h2>Prerequisites</h2>

	<ul>
		<li>
			The icat_oai distribution:
			<a href="${repoUrl}/org/icatproject/icat.oai/${project.version}/icat.oai-${project.version}-distro.zip">
				icat_oai-${project.version}-distro.zip
			</a>
		</li>
		<li>
			A suitable deployed container (here assumed to be Glassfish/Payara)
			to support a web application. Testing has been carried out with payara41.
			<a href="http://icatproject.org/installation/glassfish/">
				Glassfish/Payara installation instructions
			</a>
			are available.
		</li>

		<li>Python (version 2.4 to 2.7) installed on the server.</li>
	</ul>


	<h2>Summary of steps</h2>
	<ol>
		<li>
			Please follow
			<a href="http://icatproject.org/installation/component/">
				the generic installation instructions
			</a>
		</li>
		<li>
			Check that it works.
		</li>
	</ol>


	<h2>The setup.properties file</h2>
	<dl>
		<dt>container</dt>
		<dd>
			Values must be chosen from:
			<a target="_blank" href="http://www.eclipse.org/eclipselink/api/2.6/org/eclipse/persistence/config/TargetServer.html">
				TargetServer
			</a>
			Though only Glassfish is working properly at the moment.
		</dd>
		<dt>home</dt>
		<dd>
			is the top level of the container installation.
			For Glassfish it must contain "glassfish/domains" and
			for JBoss (wildfly) it must contain jboss-modules.jar.
		</dd>
		<dt>port</dt>
		<dd>
			is the administration port of the container
			which is typically 4848 for Glassfish and 9990 for JBoss.
		</dd>
		<dt>secure</dt>
		<dd>
			must be set to true or false.
			If true then only https and not http connections will be allowed.
		</dd>
	</dl>


	<h2>The logback.xml file</h2>
	<p>
		If you wish to modify the provided logging levels then rename
		logback.xml.example to logback.xml and edit it to suit your needs.
	</p>


	<h2>The run.properties file</h2>
	<dl>
		<dt>icat.url</dt>
		<dd>
			The url of the machine hosting the icat service.
			It should normally just have the scheme, the hostname and the port.
		</dd>
		<dt>icat.auth</dt>
		<dd>
			Space separated icat plugin name and credentials for a user
			permitted to read all investigations, datasets, and datafiles.
		</dd>
		<dt>adminEmails</dt>
		<dd>
			A space separated list of e-mail addresses of the repository administrator.
		</dd>
		<dt>metadataPrefixes</dt>
		<dd>
			A space separated list of metadata formats to be supported.
			At minimum, support for the Dublin Core format (oai_dc) is required.
		</dd>
		<dt>&lt;metadataPrefix&gt;.xslt</dt>
		<dd>
			For each metadata format, specify the absolute path to an xslt definition.
		</dd>
		<dt>&lt;metadataPrefix&gt;.namespace</dt>
		<dd>
			For each metadata format, specify the namespace.
		</dd>
		<dt>&lt;metadataPrefix&gt;.schema</dt>
		<dd>
			For each metadata format, specify the link to a schema definition.
		</dd>
	</dl>


	<h2>Check that icat.oai works</h2>
	<p>
		A simple standalone test is to run:
		<blockquote>
			<code>curl -k https://localhost:8181/icat.oai/request?verb=Identify -w "\n"</code>
			which should return the OAI-PMH Identify response
		</blockquote>
	</p>

</body>
</html>